<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景和标题 -->
  <rect x="0" y="0" width="800" height="600" fill="#f8f9fa" />
  <text x="400" y="30" font-family="Arial" font-size="20" font-weight="bold" text-anchor="middle">食物营养分析系统架构图</text>

  <!-- 前端部分 -->
  <rect x="50" y="80" width="700" height="120" rx="10" fill="#e3f2fd" stroke="#90caf9" stroke-width="2" />
  <text x="400" y="70" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">前端</text>
  
  <rect x="80" y="100" width="180" height="80" rx="5" fill="#bbdefb" stroke="#64b5f6" stroke-width="2" />
  <text x="170" y="130" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">网页界面</text>
  <text x="170" y="150" font-family="Arial" font-size="12" text-anchor="middle">HTML/CSS/JavaScript</text>
  <text x="170" y="170" font-family="Arial" font-size="12" text-anchor="middle">用户交互与数据展示</text>
  
  <rect x="310" y="100" width="180" height="80" rx="5" fill="#bbdefb" stroke="#64b5f6" stroke-width="2" />
  <text x="400" y="130" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">数据可视化</text>
  <text x="400" y="150" font-family="Arial" font-size="12" text-anchor="middle">营养成分图表</text>
  <text x="400" y="170" font-family="Arial" font-size="12" text-anchor="middle">历史记录管理</text>
  
  <rect x="540" y="100" width="180" height="80" rx="5" fill="#bbdefb" stroke="#64b5f6" stroke-width="2" />
  <text x="630" y="130" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">系统状态监控</text>
  <text x="630" y="150" font-family="Arial" font-size="12" text-anchor="middle">CPU使用率</text>
  <text x="630" y="170" font-family="Arial" font-size="12" text-anchor="middle">分析进度指示</text>

  <!-- 中间部分：Web服务器和总控脚本 -->
  <rect x="50" y="230" width="700" height="100" rx="10" fill="#e8f5e9" stroke="#a5d6a7" stroke-width="2" />
  <text x="400" y="220" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">服务层</text>
  
  <rect x="80" y="250" width="300" height="60" rx="5" fill="#c8e6c9" stroke="#81c784" stroke-width="2" />
  <text x="230" y="280" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Flask Web服务器 (server.py)</text>
  
  <rect x="420" y="250" width="300" height="60" rx="5" fill="#c8e6c9" stroke="#81c784" stroke-width="2" />
  <text x="570" y="280" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">总控脚本 (analyze_food.sh)</text>

  <!-- 后端部分 -->
  <rect x="50" y="360" width="700" height="130" rx="10" fill="#fff3e0" stroke="#ffcc80" stroke-width="2" />
  <text x="400" y="350" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">后端程序</text>
  
  <rect x="80" y="380" width="200" height="90" rx="5" fill="#ffe0b2" stroke="#ffb74d" stroke-width="2" />
  <text x="180" y="405" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">摄像头程序</text>
  <text x="180" y="425" font-family="Arial" font-size="12" text-anchor="middle">Python (camera_capture.py)</text>
  <text x="180" y="445" font-family="Arial" font-size="12" text-anchor="middle">拍照和图像处理</text>
  <text x="180" y="465" font-family="Arial" font-size="10" font-style="italic" text-anchor="middle">运行于CPU核心1</text>
  
  <rect x="300" y="380" width="200" height="90" rx="5" fill="#ffe0b2" stroke="#ffb74d" stroke-width="2" />
  <text x="400" y="405" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">称重程序</text>
  <text x="400" y="425" font-family="Arial" font-size="12" text-anchor="middle">C语言 (hx711_weight.c)</text>
  <text x="400" y="445" font-family="Arial" font-size="12" text-anchor="middle">重量测量</text>
  <text x="400" y="465" font-family="Arial" font-size="10" font-style="italic" text-anchor="middle">运行于CPU核心2</text>
  
  <rect x="520" y="380" width="200" height="90" rx="5" fill="#ffe0b2" stroke="#ffb74d" stroke-width="2" />
  <text x="620" y="405" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">API分析程序</text>
  <text x="620" y="425" font-family="Arial" font-size="12" text-anchor="middle">Python (food_nutrition_analyzer.py)</text>
  <text x="620" y="445" font-family="Arial" font-size="12" text-anchor="middle">远程API调用</text>
  <text x="620" y="465" font-family="Arial" font-size="10" font-style="italic" text-anchor="middle">运行于CPU核心0</text>

  <!-- 数据存储 -->
  <rect x="50" y="520" width="700" height="60" rx="10" fill="#e1f5fe" stroke="#81d4fa" stroke-width="2" />
  <text x="400" y="510" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">数据存储</text>
  
  <rect x="80" y="530" width="140" height="40" rx="5" fill="#b3e5fc" stroke="#4fc3f7" stroke-width="2" />
  <text x="150" y="555" font-family="Arial" font-size="12" text-anchor="middle">图像文件 (.jpg)</text>
  
  <rect x="240" y="530" width="140" height="40" rx="5" fill="#b3e5fc" stroke="#4fc3f7" stroke-width="2" />
  <text x="310" y="555" font-family="Arial" font-size="12" text-anchor="middle">状态数据 (.json)</text>
  
  <rect x="400" y="530" width="140" height="40" rx="5" fill="#b3e5fc" stroke="#4fc3f7" stroke-width="2" />
  <text x="470" y="555" font-family="Arial" font-size="12" text-anchor="middle">重量数据 (.txt)</text>
  
  <rect x="560" y="530" width="160" height="40" rx="5" fill="#b3e5fc" stroke="#4fc3f7" stroke-width="2" />
  <text x="640" y="555" font-family="Arial" font-size="12" text-anchor="middle">分析结果 (.json)</text>

  <!-- 流程箭头 -->
  <!-- 前端到服务层 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>
  
  <!-- 前端到服务层 -->
  <line x1="170" y1="180" x2="230" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="180" y="220" font-family="Arial" font-size="10" text-anchor="middle">API请求</text>
  
  <!-- 服务层内部 -->
  <line x1="380" y1="280" x2="420" y2="280" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="400" y="270" font-family="Arial" font-size="10" text-anchor="middle">启动</text>
  
  <!-- 总控脚本到后端程序 -->
  <line x1="520" y1="310" x2="180" y2="380" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="570" y1="310" x2="400" y2="380" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="620" y1="310" x2="620" y2="380" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="350" y="340" font-family="Arial" font-size="10" text-anchor="middle">并行执行</text>
  
  <!-- 后端程序到数据存储 -->
  <line x1="180" y1="470" x2="150" y2="530" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="180" y1="470" x2="310" y2="530" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="400" y1="470" x2="470" y2="530" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
  <line x1="620" y1="470" x2="640" y2="530" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- API分析程序到远程API -->
  <path d="M 720,430 Q 750,430 750,380 Q 750,330 720,330" fill="none" stroke="#666" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead)" /> 
  <text x="765" y="380" font-family="Arial" font-size="12" text-anchor="middle">远程API</text>
  
  <!-- 数据存储到API分析 -->
  <path d="M 150,570 Q 150,600 400,600 Q 650,600 650,570" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="400" y="595" font-family="Arial" font-size="10" text-anchor="middle">数据整合与分析</text>
  
  <!-- 结果数据到前端 -->
  <path d="M 640,530 Q 640,500 750,500 Q 750,150 720,150" fill="none" stroke="#666" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="750" y="320" font-family="Arial" font-size="10" text-anchor="middle">结果展示</text>
</svg>
